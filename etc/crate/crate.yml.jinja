{%- set crate = config['containers']['iris-crate'] -%}
es:
    api:
        enabled: true
script:
    groovy:
        sandbox:
            enabled: true

network:
    bind_host: 0.0.0.0
    publish_host: {{ hostname }}

http:
    publish_port: {{ crate['ports'][0][0] }}
    port: {{ crate['ports'][0][1] }}
    cors:
        enabled: true
        allow-origin: "/.*/"

transport:
    publish_port: {{ crate['ports'][1][0] }}
    tcp:
        port: {{ crate['ports'][1][1] }}

path:
    logs:  {{ crate['log_path'] }}
    data:  {{ crate['data_path'] }}

discovery:
    type: zen
    zen:
        ping:
            multicast:
                enabled:  false
            unicast:
                hosts:
                    {%- for node in crate['hosts'] %}
                    - {{ node }}:{{ crate['ports'][1][0] }}
                    {%- endfor %}

cluster:
    name: {{ crate['cluster_name'] }}
